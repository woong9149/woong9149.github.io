---
title: "[개발일지]2021-01-22"
categories:
- ''
- TIL
- 개발일지
- 회고
tags:
- TIL
- 개발일지
- 회고
---

# 작업내용
### 앱에서 노출되는 평점을 ERP에 노출시키는 작업   
- 앱에서 노출되는 업체의 평점을, ERP에서 볼 수 있게 노출시키는 작업.   
- 평점을 만드는 공식이 있기 때문에 쿼리작업은 어렵지 않았음.   
- 평점은 5점이하의 소수점 첫번 째 자리까지 표시하므로, PHP 에서 정수를 소수점 이하 첫 번째 자리까지 표시하는 것이 까다로웠음.
### 앱에 있는 ERP 메뉴 이동 시 앱의 헤더가 표시되게 하는 작업  
- 현재 URL을 split()해서 웹브라우저인지, 모바일웹인지, 앱인지를 구분해 헤더를 다르게 표시하고 있음.   
- 기존에 이용중인 사용자 중, 로그인 상태를 유지해서 사용하고 있는 경우 split()를 하는 구분자 바로 다음에 버전을 나타내는 파라미터가 있는 경우가 있는데 이럴 경우 페이지가 깨져서 표시되는 에러가 있었음.   
- 기존에 `location.href.split()` 를 `location.href.includes()`로 바꿔 임시방편으로 에러를 차단함.
# 새로 배운 내용
PHP 에서 소수점을 표시하는 방법은   
- **round()**   
- **number_format()**   
- **sprintf()**   

등 이 있지만, `round()` 의 경우 정수는 정수 그대로 표시해주기 때문에 적절하지 않았다. `sprintf()`는 적용해보지 않았고, `number_format()`을 적용해도 계속 정수를 그대로 반환하고 있었다. 메뉴얼을 보니 `number_format()`는 리턴값이 없어서 다른 변수에 담아서 사용하면 소수점을 표시안하는 것이었다. 그래서 변수에 담지않고 그대로 `response` 객체에 담아서 사용했다.   
# 회고
PHP에서 정수를 소수점 이하 첫 번째 자리까지 표시하는 작업에서 시간을 많이 잡아 먹었다. 다른 부분은 `round()`로도 적용이 된 것 같은데 사실은 그게 아니었음을 알아내는데 시간이 소모되고, `number_format()`가 반환값이 없음을 알아내는데도 시간이 꽤 걸렸다. 역시나 가장 먼저 참고해야 하는 것은 메뉴얼인 것 같다. 그 이후에 블로그나 아티클을 보면서 다양한 사용법을 참고하는 것이 좋을 것 같다.
